<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Asthma Control Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', 'Noto Sans', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            overflow: visible;
            transition: all 0.3s ease;
        }

        .language-button {
            padding: 1rem 1.5rem;
            background: white;
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            color: #333;
            transition: all 0.3s ease;
            border-radius: 15px;
            width: 100%;
        }

        .language-button:hover {
            background: #f5f5f5;
        }

        .language-button.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .language-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin-top: 0.5rem;
            min-width: 200px;
        }

        .language-dropdown.show {
            display: block;
            animation: dropIn 0.3s ease;
        }

        @keyframes dropIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .language-option {
            padding: 1rem 1.5rem;
            background: white;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            display: block;
            width: 100%;
            text-align: left;
            color: #333;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .language-option:hover {
            background: #f5f5f5;
        }

        .language-option.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .container {
            display: flex;
            height: 100vh;
            position: relative;
        }

        .age-selector {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .age-selector.hidden {
            display: none;
        }

        .age-selector:hover {
            transform: scale(1.02);
        }

        .age-selector.left {
            background: linear-gradient(135deg, #667eea 0%, #5a67d8 100%);
            border-right: 3px solid rgba(255, 255, 255, 0.3);
        }

        .age-selector.right {
            background: linear-gradient(135deg, #764ba2 0%, #8b5bb1 100%);
        }

        .age-content {
            text-align: center;
            color: white;
            padding: 2rem;
        }

        .age-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
        }

        .age-title {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .age-subtitle {
            font-size: 1.8rem;
            opacity: 0.95;
            margin-bottom: 0.5rem;
        }

        .questionnaire-container {
            display: none;
            width: 100%;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 2rem;
            padding-top: 100px;
            animation: slideUp 0.5s ease;
        }

        .questionnaire-container.active {
            display: block;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .questionnaire-header {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .questionnaire-title {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .section-divider {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin: 2rem 0;
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .section-icon {
            font-size: 2.5rem;
        }

        .question-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .question-card:hover {
            transform: translateY(-2px);
        }

        .question-card.child-question {
            border-left: 5px solid #667eea;
        }

        .question-card.parent-question {
            border-left: 5px solid #764ba2;
        }

        .question-number {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            text-align: center;
            line-height: 50px;
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 1rem;
            flex-shrink: 0;
        }

        .question-number.child {
            background: linear-gradient(135deg, #667eea, #5a67d8);
        }

        .question-number.parent {
            background: linear-gradient(135deg, #764ba2, #8b5bb1);
        }

        .question-text {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 1.5rem;
            line-height: 1.5;
            font-weight: 500;
            display: inline;
        }

        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
        }

        .option-button {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
            text-align: center;
            flex: 1;
            max-width: 300px;
        }

        .option-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .option-button.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            transform: scale(1.05);
        }

        .option-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 0.5rem;
        }

        .option-text {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .option-value {
            font-size: 1rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }

        .score-container {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            margin-top: 2rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
        }

        .score-container.show {
            display: block;
            animation: bounceIn 0.5s ease;
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0.3);
                opacity: 0;
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .score-display {
            font-size: 5rem;
            font-weight: bold;
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 1.5rem;
            border: 5px solid;
        }

        .score-display.good {
            background: #4caf50;
            color: white;
            border-color: #2e7d32;
        }

        .score-display.fair {
            background: #ffc107;
            color: #333;
            border-color: #f57c00;
        }

        .score-display.poor {
            background: #f44336;
            color: white;
            border-color: #c62828;
        }

        .score-comment {
            font-size: 2rem;
            color: #333;
            margin-bottom: 2rem;
            font-weight: 600;
            line-height: 1.5;
        }

        .restart-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 1.5rem 3rem;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 1rem;
        }

        .restart-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: scale(1.1);
        }

        /* RTL support for Urdu */
        .rtl {
            direction: rtl;
        }

        .rtl .question-number {
            margin-right: 0;
            margin-left: 1rem;
        }

        .rtl .language-dropdown {
            right: auto;
            left: 0;
        }

        @media (max-width: 768px) {
            .options-container {
                flex-direction: column;
            }
            
            .option-button {
                max-width: 100%;
            }

            .questionnaire-title {
                font-size: 1.8rem;
            }

            .question-text {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <button class="language-button" id="languageBtn">
            <span id="currentLangFlag">ğŸ‡¹ğŸ‡¼</span>
            <span id="currentLangText">ç¹é«”ä¸­æ–‡</span>
            <span>â–¼</span>
        </button>
        <div class="language-dropdown" id="languageDropdown">
            <button class="language-option" data-lang="en">ğŸ‡¬ğŸ‡§ English</button>
            <button class="language-option" data-lang="zh-CN">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</button>
            <button class="language-option" data-lang="zh-TW">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</button>
            <button class="language-option" data-lang="ur">ğŸ‡µğŸ‡° Ø§Ø±Ø¯Ùˆ</button>
        </div>
    </div>

    <div class="container" id="mainContainer">
        <div class="age-selector left" id="leftSelector">
            <div class="age-content">
                <div class="age-icon">ğŸ‘¶</div>
                <div class="age-title" data-i18n="children"></div>
                <div class="age-subtitle" data-i18n="age4-11"></div>
                <div class="age-subtitle" data-i18n="cactTest"></div>
            </div>
        </div>
        
        <div class="age-selector right" id="rightSelector">
            <div class="age-content">
                <div class="age-icon">ğŸ‘¤</div>
                <div class="age-title" data-i18n="teensAdults"></div>
                <div class="age-subtitle" data-i18n="age12+"></div>
                <div class="age-subtitle" data-i18n="actTest"></div>
            </div>
        </div>
    </div>

    <div class="questionnaire-container" id="questionnaireContainer">
        <button class="back-button" id="backButton">â†</button>
        <div class="questionnaire-header">
            <h1 class="questionnaire-title" id="questionnaireTitle"></h1>
        </div>
        <div id="questionsContainer"></div>
        <div class="score-container" id="scoreContainer">
            <div class="score-display" id="scoreDisplay">0</div>
            <div class="score-comment" id="scoreComment"></div>
            <button class="restart-button" id="restartButton">
                <span>ğŸ”„</span>
                <span data-i18n="startAgain"></span>
            </button>
        </div>
    </div>

    <script>
        // Icon constants
        const ICONS = {
            verySad: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIGZpbGw9IiNmNDQzMzYiLz48Y2lyY2xlIGN4PSI4IiBjeT0iMTAiIHI9IjEuNSIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjEwIiByPSIxLjUiIGZpbGw9IndoaXRlIi8+PHBhdGggZD0iTTggMTZjMS4zLTEuMyAzLjctMS4zIDUtMS4zIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz48L3N2Zz4=',
            sad: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIGZpbGw9IiNmZjk4MDAiLz48Y2lyY2xlIGN4PSI4IiBjeT0iMTAiIHI9IjEuNSIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjEwIiByPSIxLjUiIGZpbGw9IndoaXRlIi8+PHBhdGggZD0iTTggMTVjMS4zLTEgMy43LTEgNSAwIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz48L3N2Zz4=',
            neutral: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIGZpbGw9IiNmZmMxMDciLz48Y2lyY2xlIGN4PSI4IiBjeT0iMTAiIHI9IjEuNSIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjEwIiByPSIxLjUiIGZpbGw9IndoaXRlIi8+PHBhdGggZD0iTTggMTUgTDE2IDE1IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiLz48L3N2Zz4=',
            happy: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIGZpbGw9IiM4YmMzNGEiLz48Y2lyY2xlIGN4PSI4IiBjeT0iMTAiIHI9IjEuNSIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjEwIiByPSIxLjUiIGZpbGw9IndoaXRlIi8+PHBhdGggZD0iTTggMTRjMS4zIDEuMyAzLjcgMS4zIDUgMCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+PC9zdmc+',
            veryHappy: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIGZpbGw9IiM0Y2FmNTAiLz48Y2lyY2xlIGN4PSI4IiBjeT0iMTAiIHI9IjEuNSIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjEwIiByPSIxLjUiIGZpbGw9IndoaXRlIi8+PHBhdGggZD0iTTcgMTNjMiAzIDYgMyA4IDAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg=='
        };

        // Translations
        const translations = {
            'en': {
                children: 'Children',
                teensAdults: 'Teens & Adults',
                'age4-11': 'Ages 4-11',
                'age12+': 'Ages 12+',
                cactTest: 'C-ACT Test',
                actTest: 'ACT Test',
                startAgain: 'Start Again',
                score: 'Score',
                cactTitle: 'Childhood Asthma Control Test (C-ACT)',
                actTitle: 'Asthma Control Test (ACT)',
                childSection: 'Questions for Child (to be answered by child)',
                parentSection: 'Questions for Parent/Caregiver',
                wellControlled: 'âœ… Well Controlled - Asthma appears to be under control',
                partlyControlled: 'âš ï¸ Partly Controlled - Asthma may not be as well controlled as it could be',
                notControlled: 'âŒ Not Controlled - Asthma is not well controlled. Please consult your healthcare provider',
                childWellControlled: 'âœ… Well Controlled - Your child\'s asthma appears to be under control',
                childPartlyControlled: 'âš ï¸ Partly Controlled - Your child\'s asthma may not be as well controlled as it could be',
                childNotControlled: 'âŒ Not Controlled - Your child\'s asthma is not well controlled. Please consult your healthcare provider'
            },
            'zh-CN': {
                children: 'å„¿ç«¥',
                teensAdults: 'é’å°‘å¹´å’Œæˆäºº',
                'age4-11': '4-11å²',
                'age12+': '12å²åŠä»¥ä¸Š',
                cactTest: 'C-ACT æµ‹è¯•',
                actTest: 'ACT æµ‹è¯•',
                startAgain: 'é‡æ–°å¼€å§‹',
                score: 'åˆ†æ•°',
                cactTitle: 'å„¿ç«¥å“®å–˜æ§åˆ¶æµ‹è¯• (C-ACT)',
                actTitle: 'å“®å–˜æ§åˆ¶æµ‹è¯• (ACT)',
                childSection: 'å„¿ç«¥é—®é¢˜ï¼ˆç”±å„¿ç«¥å›ç­”ï¼‰',
                parentSection: 'å®¶é•¿/ç›‘æŠ¤äººé—®é¢˜',
                wellControlled: 'âœ… æ§åˆ¶è‰¯å¥½ - å“®å–˜ä¼¼ä¹å¾—åˆ°äº†æ§åˆ¶',
                partlyControlled: 'âš ï¸ éƒ¨åˆ†æ§åˆ¶ - å“®å–˜æ§åˆ¶å¯èƒ½ä¸å¤Ÿç†æƒ³',
                notControlled: 'âŒ æœªæ§åˆ¶ - å“®å–˜æ§åˆ¶ä¸ä½³ï¼Œè¯·å’¨è¯¢åŒ»ç–—ä¿å¥æä¾›è€…',
                childWellControlled: 'âœ… æ§åˆ¶è‰¯å¥½ - æ‚¨å­©å­çš„å“®å–˜ä¼¼ä¹å¾—åˆ°äº†æ§åˆ¶',
                childPartlyControlled: 'âš ï¸ éƒ¨åˆ†æ§åˆ¶ - æ‚¨å­©å­çš„å“®å–˜æ§åˆ¶å¯èƒ½ä¸å¤Ÿç†æƒ³',
                childNotControlled: 'âŒ æœªæ§åˆ¶ - æ‚¨å­©å­çš„å“®å–˜æ§åˆ¶ä¸ä½³ï¼Œè¯·å’¨è¯¢åŒ»ç–—ä¿å¥æä¾›è€…'
            },
            'zh-TW': {
                children: 'å…’ç«¥',
                teensAdults: 'é’å°‘å¹´å’Œæˆäºº',
                'age4-11': '4-11æ­²',
                'age12+': '12æ­²åŠä»¥ä¸Š',
                cactTest: 'C-ACT æ¸¬è©¦',
                actTest: 'ACT æ¸¬è©¦',
                startAgain: 'é‡æ–°é–‹å§‹',
                score: 'åˆ†æ•¸',
                cactTitle: 'å…’ç«¥å“®å–˜æ§åˆ¶æ¸¬è©¦ (C-ACT)',
                actTitle: 'å“®å–˜æ§åˆ¶æ¸¬è©¦ (ACT)',
                childSection: 'å…’ç«¥å•é¡Œï¼ˆç”±å…’ç«¥å›ç­”ï¼‰',
                parentSection: 'å®¶é•·/ç›£è­·äººå•é¡Œ',
                wellControlled: 'âœ… æ§åˆ¶è‰¯å¥½ - å“®å–˜ä¼¼ä¹å¾—åˆ°äº†æ§åˆ¶',
                partlyControlled: 'âš ï¸ éƒ¨åˆ†æ§åˆ¶ - å“®å–˜æ§åˆ¶å¯èƒ½ä¸å¤ ç†æƒ³',
                notControlled: 'âŒ æœªæ§åˆ¶ - å“®å–˜æ§åˆ¶ä¸ä½³ï¼Œè«‹è«®è©¢é†«ç™‚ä¿å¥æä¾›è€…',
                childWellControlled: 'âœ… æ§åˆ¶è‰¯å¥½ - æ‚¨å­©å­çš„å“®å–˜ä¼¼ä¹å¾—åˆ°äº†æ§åˆ¶',
                childPartlyControlled: 'âš ï¸ éƒ¨åˆ†æ§åˆ¶ - æ‚¨å­©å­çš„å“®å–˜æ§åˆ¶å¯èƒ½ä¸å¤ ç†æƒ³',
                childNotControlled: 'âŒ æœªæ§åˆ¶ - æ‚¨å­©å­çš„å“®å–˜æ§åˆ¶ä¸ä½³ï¼Œè«‹è«®è©¢é†«ç™‚ä¿å¥æä¾›è€…'
            },
            'ur': {
                children: 'Ø¨Ú†Û’',
                teensAdults: 'Ù†ÙˆØ¬ÙˆØ§Ù† Ø§ÙˆØ± Ø¨Ø§Ù„Øº',
                'age4-11': '4-11 Ø³Ø§Ù„',
                'age12+': '12 Ø³Ø§Ù„ Ø§ÙˆØ± Ø§ÙˆÙ¾Ø±',
                cactTest: 'C-ACT Ù¹ÛŒØ³Ù¹',
                actTest: 'ACT Ù¹ÛŒØ³Ù¹',
                startAgain: 'Ø¯ÙˆØ¨Ø§Ø±Û Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº',
                score: 'Ø§Ø³Ú©ÙˆØ±',
                cactTitle: 'Ø¨Ú†ÙˆÚº Ú©Ø§ Ø¯Ù…Û Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù¹ÛŒØ³Ù¹ (C-ACT)',
                actTitle: 'Ø¯Ù…Û Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù¹ÛŒØ³Ù¹ (ACT)',
                childSection: 'Ø¨Ú†Û’ Ú©Û’ Ø³ÙˆØ§Ù„Ø§Øª (Ø¨Ú†Û Ø¬ÙˆØ§Ø¨ Ø¯Û’)',
                parentSection: 'ÙˆØ§Ù„Ø¯ÛŒÙ†/Ù†Ú¯Ø±Ø§Úº Ú©Û’ Ø³ÙˆØ§Ù„Ø§Øª',
                wellControlled: 'âœ… Ø§Ú†Ú¾ÛŒ Ø·Ø±Ø­ Ú©Ù†Ù¹Ø±ÙˆÙ„ - Ø¯Ù…Û Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù…ÛŒÚº Ù†Ø¸Ø± Ø¢ØªØ§ ÛÛ’',
                partlyControlled: 'âš ï¸ Ø¬Ø²ÙˆÛŒ Ú©Ù†Ù¹Ø±ÙˆÙ„ - Ø¯Ù…Û Ù…Ú©Ù…Ù„ Ø·ÙˆØ± Ù¾Ø± Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù…ÛŒÚº Ù†ÛÛŒÚº ÛÙˆ Ø³Ú©ØªØ§',
                notControlled: 'âŒ ØºÛŒØ± Ú©Ù†Ù¹Ø±ÙˆÙ„ - Ø¯Ù…Û Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù…ÛŒÚº Ù†ÛÛŒÚº ÛÛ’Û” Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§Ù¾Ù†Û’ ÚˆØ§Ú©Ù¹Ø± Ø³Û’ Ø±Ø§Ø¨Ø·Û Ú©Ø±ÛŒÚº',
                childWellControlled: 'âœ… Ø§Ú†Ú¾ÛŒ Ø·Ø±Ø­ Ú©Ù†Ù¹Ø±ÙˆÙ„ - Ø¢Ù¾ Ú©Û’ Ø¨Ú†Û’ Ú©Ø§ Ø¯Ù…Û Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù…ÛŒÚº Ù†Ø¸Ø± Ø¢ØªØ§ ÛÛ’',
                childPartlyControlled: 'âš ï¸ Ø¬Ø²ÙˆÛŒ Ú©Ù†Ù¹Ø±ÙˆÙ„ - Ø¢Ù¾ Ú©Û’ Ø¨Ú†Û’ Ú©Ø§ Ø¯Ù…Û Ù…Ú©Ù…Ù„ Ø·ÙˆØ± Ù¾Ø± Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù…ÛŒÚº Ù†ÛÛŒÚº ÛÙˆ Ø³Ú©ØªØ§',
                childNotControlled: 'âŒ ØºÛŒØ± Ú©Ù†Ù¹Ø±ÙˆÙ„ - Ø¢Ù¾ Ú©Û’ Ø¨Ú†Û’ Ú©Ø§ Ø¯Ù…Û Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù…ÛŒÚº Ù†ÛÛŒÚº ÛÛ’Û” Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§Ù¾Ù†Û’ ÚˆØ§Ú©Ù¹Ø± Ø³Û’ Ø±Ø§Ø¨Ø·Û Ú©Ø±ÛŒÚº'
            }
        };

        // Questionnaire translations
        const questionnaireTranslations = {
            'en': {
                CACT: [
                    // Child questions (1-4)
                    {
                        question: "How is your asthma today?",
                        options: [
                            { text: "Very bad", value: 0 },
                            { text: "Bad", value: 1 },
                            { text: "Good", value: 2 },
                            { text: "Very good", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "How much of a problem is your asthma when you run, exercise or play sports?",
                        options: [
                            { text: "It's a big problem, I can't do what I want to do", value: 0 },
                            { text: "It's a problem and I don't like it", value: 1 },
                            { text: "It's a little problem but it's okay", value: 2 },
                            { text: "It's not a problem", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "Do you cough because of your asthma?",
                        options: [
                            { text: "Yes, all of the time", value: 0 },
                            { text: "Yes, most of the time", value: 1 },
                            { text: "Yes, some of the time", value: 2 },
                            { text: "No, none of the time", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "Do you wake up during the night because of your asthma?",
                        options: [
                            { text: "Yes, all of the time", value: 0 },
                            { text: "Yes, most of the time", value: 1 },
                            { text: "Yes, some of the time", value: 2 },
                            { text: "No, none of the time", value: 3 }
                        ],
                        isChild: true
                    },
                    // Parent questions (5-7)
                    {
                        question: "During the last 4 weeks, how many days did your child have any daytime asthma symptoms?",
                        options: [
                            { text: "Every day", value: 0 },
                            { text: "19-24 days", value: 1 },
                            { text: "11-18 days", value: 2 },
                            { text: "4-10 days", value: 3 },
                            { text: "1-3 days", value: 4 },
                            { text: "Not at all", value: 5 }
                        ],
                        isChild: false
                    },
                    {
                        question: "During the last 4 weeks, how many days did your child wheeze during the day because of asthma?",
                        options: [
                            { text: "Every day", value: 0 },
                            { text: "19-24 days", value: 1 },
                            { text: "11-18 days", value: 2 },
                            { text: "4-10 days", value: 3 },
                            { text: "1-3 days", value: 4 },
                            { text: "Not at all", value: 5 }
                        ],
                        isChild: false
                    },
                    {
                        question: "During the last 4 weeks, how many days did your child wake up during the night because of asthma?",
                        options: [
                            { text: "Every day", value: 0 },
                            { text: "19-24 days", value: 1 },
                            { text: "11-18 days", value: 2 },
                            { text: "4-10 days", value: 3 },
                            { text: "1-3 days", value: 4 },
                            { text: "Not at all", value: 5 }
                        ],
                        isChild: false
                    }
                ],
                ACT: [
                    {
                        question: "In the past 4 weeks, how much of the time did your asthma keep you from getting as much done at work, school or at home?",
                        options: [
                            { text: "All of the time", value: 1 },
                            { text: "Most of the time", value: 2 },
                            { text: "Some of the time", value: 3 },
                            { text: "A little of the time", value: 4 },
                            { text: "None of the time", value: 5 }
                        ]
                    },
                    {
                        question: "During the past 4 weeks, how often have you had shortness of breath?",
                        options: [
                            { text: "More than once a day", value: 1 },
                            { text: "Once a day", value: 2 },
                            { text: "3 to 6 times a week", value: 3 },
                            { text: "Once or twice a week", value: 4 },
                            { text: "Not at all", value: 5 }
                        ]
                    },
                    {
                        question: "During the past 4 weeks, how often did your asthma symptoms wake you up at night or earlier than usual in the morning?",
                        options: [
                            { text: "4 or more nights a week", value: 1 },
                            { text: "2 or 3 nights a week", value: 2 },
                            { text: "Once a week", value: 3 },
                            { text: "Once or twice", value: 4 },
                            { text: "Not at all", value: 5 }
                        ]
                    },
                    {
                        question: "During the past 4 weeks, how often have you used your rescue inhaler or nebulizer medication?",
                        options: [
                            { text: "3 or more times per day", value: 1 },
                            { text: "1 or 2 times per day", value: 2 },
                            { text: "2 or 3 times per week", value: 3 },
                            { text: "Once a week or less", value: 4 },
                            { text: "Not at all", value: 5 }
                        ]
                    },
                    {
                        question: "How would you rate your asthma control during the past 4 weeks?",
                        options: [
                            { text: "Not controlled at all", value: 1 },
                            { text: "Poorly controlled", value: 2 },
                            { text: "Somewhat controlled", value: 3 },
                            { text: "Well controlled", value: 4 },
                            { text: "Completely controlled", value: 5 }
                        ]
                    }
                ]
            },
            'zh-CN': {
                CACT: [
                    // Child questions (1-4)
                    {
                        question: "ä»Šå¤©ä½ çš„å“®å–˜æ€ä¹ˆæ ·ï¼Ÿ",
                        options: [
                            { text: "éå¸¸ç³Ÿç³•", value: 0 },
                            { text: "ç³Ÿç³•", value: 1 },
                            { text: "å¥½", value: 2 },
                            { text: "éå¸¸å¥½", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "å½“ä½ è·‘æ­¥ã€è¿åŠ¨æˆ–åšä½“è‚²æ´»åŠ¨æ—¶ï¼Œå“®å–˜å¯¹ä½ æœ‰å¤šå¤§å½±å“ï¼Ÿ",
                        options: [
                            { text: "å½±å“å¾ˆå¤§ï¼Œæˆ‘ä¸èƒ½åšæƒ³åšçš„äº‹", value: 0 },
                            { text: "æœ‰å½±å“ï¼Œæˆ‘ä¸å–œæ¬¢", value: 1 },
                            { text: "æœ‰ä¸€ç‚¹å½±å“ï¼Œä½†è¿˜å¯ä»¥", value: 2 },
                            { text: "æ²¡æœ‰å½±å“", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "ä½ ä¼šå› ä¸ºå“®å–˜è€Œå’³å—½å—ï¼Ÿ",
                        options: [
                            { text: "æ˜¯çš„ï¼Œä¸€ç›´éƒ½ä¼š", value: 0 },
                            { text: "æ˜¯çš„ï¼Œå¤§éƒ¨åˆ†æ—¶é—´", value: 1 },
                            { text: "æ˜¯çš„ï¼Œæœ‰æ—¶å€™", value: 2 },
                            { text: "ä¸ï¼Œä»æ¥ä¸ä¼š", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "ä½ ä¼šå› ä¸ºå“®å–˜åœ¨å¤œé—´é†’æ¥å—ï¼Ÿ",
                        options: [
                            { text: "æ˜¯çš„ï¼Œä¸€ç›´éƒ½ä¼š", value: 0 },
                            { text: "æ˜¯çš„ï¼Œå¤§éƒ¨åˆ†æ—¶é—´", value: 1 },
                            { text: "æ˜¯çš„ï¼Œæœ‰æ—¶å€™", value: 2 },
                            { text: "ä¸ï¼Œä»æ¥ä¸ä¼š", value: 3 }
                        ],
                        isChild: true
                    },
                    // Parent questions (5-7)
                    {
                        question: "åœ¨è¿‡å»4å‘¨å†…ï¼Œæ‚¨çš„å­©å­æœ‰å¤šå°‘å¤©å‡ºç°æ—¥é—´å“®å–˜ç—‡çŠ¶ï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©", value: 0 },
                            { text: "19-24å¤©", value: 1 },
                            { text: "11-18å¤©", value: 2 },
                            { text: "4-10å¤©", value: 3 },
                            { text: "1-3å¤©", value: 4 },
                            { text: "å®Œå…¨æ²¡æœ‰", value: 5 }
                        ],
                        isChild: false
                    },
                    {
                        question: "åœ¨è¿‡å»4å‘¨å†…ï¼Œæ‚¨çš„å­©å­å› å“®å–˜è€Œåœ¨ç™½å¤©å–˜æ¯çš„å¤©æ•°æœ‰å¤šå°‘ï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©", value: 0 },
                            { text: "19-24å¤©", value: 1 },
                            { text: "11-18å¤©", value: 2 },
                            { text: "4-10å¤©", value: 3 },
                            { text: "1-3å¤©", value: 4 },
                            { text: "å®Œå…¨æ²¡æœ‰", value: 5 }
                        ],
                        isChild: false
                    },
                    {
                        question: "åœ¨è¿‡å»4å‘¨å†…ï¼Œæ‚¨çš„å­©å­å› å“®å–˜è€Œåœ¨å¤œé—´é†’æ¥çš„å¤©æ•°æœ‰å¤šå°‘ï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©", value: 0 },
                            { text: "19-24å¤©", value: 1 },
                            { text: "11-18å¤©", value: 2 },
                            { text: "4-10å¤©", value: 3 },
                            { text: "1-3å¤©", value: 4 },
                            { text: "å®Œå…¨æ²¡æœ‰", value: 5 }
                        ],
                        isChild: false
                    }
                ],
                ACT: [
                    {
                        question: "åœ¨è¿‡å»4å‘¨å†…ï¼Œå“®å–˜æœ‰å¤šå°‘æ—¶é—´å¦¨ç¢æ‚¨åœ¨å·¥ä½œã€å­¦æ ¡æˆ–å®¶ä¸­å®Œæˆå·¥ä½œï¼Ÿ",
                        options: [
                            { text: "ä¸€ç›´éƒ½æœ‰", value: 1 },
                            { text: "å¤§éƒ¨åˆ†æ—¶é—´", value: 2 },
                            { text: "æœ‰äº›æ—¶é—´", value: 3 },
                            { text: "å¾ˆå°‘æ—¶é—´", value: 4 },
                            { text: "å®Œå…¨æ²¡æœ‰", value: 5 }
                        ]
                    },
                    {
                        question: "åœ¨è¿‡å»4å‘¨å†…ï¼Œæ‚¨æœ‰å¤šé¢‘ç¹å‡ºç°å‘¼å¸æ€¥ä¿ƒï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©å¤šæ¬¡", value: 1 },
                            { text: "æ¯å¤©ä¸€æ¬¡", value: 2 },
                            { text: "æ¯å‘¨3-6æ¬¡", value: 3 },
                            { text: "æ¯å‘¨1-2æ¬¡", value: 4 },
                            { text: "å®Œå…¨æ²¡æœ‰", value: 5 }
                        ]
                    },
                    {
                        question: "åœ¨è¿‡å»4å‘¨å†…ï¼Œå“®å–˜ç—‡çŠ¶æœ‰å¤šé¢‘ç¹åœ¨å¤œé—´æˆ–æ¸…æ™¨æŠŠæ‚¨åµé†’ï¼Ÿ",
                        options: [
                            { text: "æ¯å‘¨4æ™šæˆ–æ›´å¤š", value: 1 },
                            { text: "æ¯å‘¨2-3æ™š", value: 2 },
                            { text: "æ¯å‘¨1æ™š", value: 3 },
                            { text: "1-2æ¬¡", value: 4 },
                            { text: "å®Œå…¨æ²¡æœ‰", value: 5 }
                        ]
                    },
                    {
                        question: "åœ¨è¿‡å»4å‘¨å†…ï¼Œæ‚¨ä½¿ç”¨æ•‘æ´å¸å…¥å™¨æˆ–é›¾åŒ–å™¨è¯ç‰©çš„é¢‘ç‡å¦‚ä½•ï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©3æ¬¡æˆ–æ›´å¤š", value: 1 },
                            { text: "æ¯å¤©1-2æ¬¡", value: 2 },
                            { text: "æ¯å‘¨2-3æ¬¡", value: 3 },
                            { text: "æ¯å‘¨1æ¬¡æˆ–æ›´å°‘", value: 4 },
                            { text: "å®Œå…¨æ²¡æœ‰", value: 5 }
                        ]
                    },
                    {
                        question: "æ‚¨å¦‚ä½•è¯„ä»·è¿‡å»4å‘¨å†…çš„å“®å–˜æ§åˆ¶æƒ…å†µï¼Ÿ",
                        options: [
                            { text: "å®Œå…¨æœªæ§åˆ¶", value: 1 },
                            { text: "æ§åˆ¶ä¸ä½³", value: 2 },
                            { text: "éƒ¨åˆ†æ§åˆ¶", value: 3 },
                            { text: "æ§åˆ¶è‰¯å¥½", value: 4 },
                            { text: "å®Œå…¨æ§åˆ¶", value: 5 }
                        ]
                    }
                ]
            },
            'zh-TW': {
                CACT: [
                    // Child questions (1-4)
                    {
                        question: "ä»Šå¤©ä½ çš„å“®å–˜æ€éº¼æ¨£ï¼Ÿ",
                        options: [
                            { text: "éå¸¸ç³Ÿç³•", value: 0 },
                            { text: "ç³Ÿç³•", value: 1 },
                            { text: "å¥½", value: 2 },
                            { text: "éå¸¸å¥½", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "ç•¶ä½ è·‘æ­¥ã€é‹å‹•æˆ–åšé«”è‚²æ´»å‹•æ™‚ï¼Œå“®å–˜å°ä½ æœ‰å¤šå¤§å½±éŸ¿ï¼Ÿ",
                        options: [
                            { text: "å½±éŸ¿å¾ˆå¤§ï¼Œæˆ‘ä¸èƒ½åšæƒ³åšçš„äº‹", value: 0 },
                            { text: "æœ‰å½±éŸ¿ï¼Œæˆ‘ä¸å–œæ­¡", value: 1 },
                            { text: "æœ‰ä¸€é»å½±éŸ¿ï¼Œä½†é‚„å¯ä»¥", value: 2 },
                            { text: "æ²’æœ‰å½±éŸ¿", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "ä½ æœƒå› ç‚ºå“®å–˜è€Œå’³å—½å—ï¼Ÿ",
                        options: [
                            { text: "æ˜¯çš„ï¼Œä¸€ç›´éƒ½æœƒ", value: 0 },
                            { text: "æ˜¯çš„ï¼Œå¤§éƒ¨åˆ†æ™‚é–“", value: 1 },
                            { text: "æ˜¯çš„ï¼Œæœ‰æ™‚å€™", value: 2 },
                            { text: "ä¸ï¼Œå¾ä¾†ä¸æœƒ", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "ä½ æœƒå› ç‚ºå“®å–˜åœ¨å¤œé–“é†’ä¾†å—ï¼Ÿ",
                        options: [
                            { text: "æ˜¯çš„ï¼Œä¸€ç›´éƒ½æœƒ", value: 0 },
                            { text: "æ˜¯çš„ï¼Œå¤§éƒ¨åˆ†æ™‚é–“", value: 1 },
                            { text: "æ˜¯çš„ï¼Œæœ‰æ™‚å€™", value: 2 },
                            { text: "ä¸ï¼Œå¾ä¾†ä¸æœƒ", value: 3 }
                        ],
                        isChild: true
                    },
                    // Parent questions (5-7)
                    {
                        question: "åœ¨éå»4é€±å…§ï¼Œæ‚¨çš„å­©å­æœ‰å¤šå°‘å¤©å‡ºç¾æ—¥é–“å“®å–˜ç—‡ç‹€ï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©", value: 0 },
                            { text: "19-24å¤©", value: 1 },
                            { text: "11-18å¤©", value: 2 },
                            { text: "4-10å¤©", value: 3 },
                            { text: "1-3å¤©", value: 4 },
                            { text: "å®Œå…¨æ²’æœ‰", value: 5 }
                        ],
                        isChild: false
                    },
                    {
                        question: "åœ¨éå»4é€±å…§ï¼Œæ‚¨çš„å­©å­å› å“®å–˜è€Œåœ¨ç™½å¤©å–˜æ¯çš„å¤©æ•¸æœ‰å¤šå°‘ï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©", value: 0 },
                            { text: "19-24å¤©", value: 1 },
                            { text: "11-18å¤©", value: 2 },
                            { text: "4-10å¤©", value: 3 },
                            { text: "1-3å¤©", value: 4 },
                            { text: "å®Œå…¨æ²’æœ‰", value: 5 }
                        ],
                        isChild: false
                    },
                    {
                        question: "åœ¨éå»4é€±å…§ï¼Œæ‚¨çš„å­©å­å› å“®å–˜è€Œåœ¨å¤œé–“é†’ä¾†çš„å¤©æ•¸æœ‰å¤šå°‘ï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©", value: 0 },
                            { text: "19-24å¤©", value: 1 },
                            { text: "11-18å¤©", value: 2 },
                            { text: "4-10å¤©", value: 3 },
                            { text: "1-3å¤©", value: 4 },
                            { text: "å®Œå…¨æ²’æœ‰", value: 5 }
                        ],
                        isChild: false
                    }
                ],
                ACT: [
                    {
                        question: "åœ¨éå»4é€±å…§ï¼Œå“®å–˜æœ‰å¤šå°‘æ™‚é–“å¦¨ç¤™æ‚¨åœ¨å·¥ä½œã€å­¸æ ¡æˆ–å®¶ä¸­å®Œæˆå·¥ä½œï¼Ÿ",
                        options: [
                            { text: "ä¸€ç›´éƒ½æœ‰", value: 1 },
                            { text: "å¤§éƒ¨åˆ†æ™‚é–“", value: 2 },
                            { text: "æœ‰äº›æ™‚é–“", value: 3 },
                            { text: "å¾ˆå°‘æ™‚é–“", value: 4 },
                            { text: "å®Œå…¨æ²’æœ‰", value: 5 }
                        ]
                    },
                    {
                        question: "åœ¨éå»4é€±å…§ï¼Œæ‚¨æœ‰å¤šé »ç¹å‡ºç¾å‘¼å¸æ€¥ä¿ƒï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©å¤šæ¬¡", value: 1 },
                            { text: "æ¯å¤©ä¸€æ¬¡", value: 2 },
                            { text: "æ¯é€±3-6æ¬¡", value: 3 },
                            { text: "æ¯é€±1-2æ¬¡", value: 4 },
                            { text: "å®Œå…¨æ²’æœ‰", value: 5 }
                        ]
                    },
                    {
                        question: "åœ¨éå»4é€±å…§ï¼Œå“®å–˜ç—‡ç‹€æœ‰å¤šé »ç¹åœ¨å¤œé–“æˆ–æ¸…æ™¨æŠŠæ‚¨åµé†’ï¼Ÿ",
                        options: [
                            { text: "æ¯é€±4æ™šæˆ–æ›´å¤š", value: 1 },
                            { text: "æ¯é€±2-3æ™š", value: 2 },
                            { text: "æ¯é€±1æ™š", value: 3 },
                            { text: "1-2æ¬¡", value: 4 },
                            { text: "å®Œå…¨æ²’æœ‰", value: 5 }
                        ]
                    },
                    {
                        question: "åœ¨éå»4é€±å…§ï¼Œæ‚¨ä½¿ç”¨æ•‘æ´å¸å…¥å™¨æˆ–éœ§åŒ–å™¨è—¥ç‰©çš„é »ç‡å¦‚ä½•ï¼Ÿ",
                        options: [
                            { text: "æ¯å¤©3æ¬¡æˆ–æ›´å¤š", value: 1 },
                            { text: "æ¯å¤©1-2æ¬¡", value: 2 },
                            { text: "æ¯é€±2-3æ¬¡", value: 3 },
                            { text: "æ¯é€±1æ¬¡æˆ–æ›´å°‘", value: 4 },
                            { text: "å®Œå…¨æ²’æœ‰", value: 5 }
                        ]
                    },
                    {
                        question: "æ‚¨å¦‚ä½•è©•åƒ¹éå»4é€±å…§çš„å“®å–˜æ§åˆ¶æƒ…æ³ï¼Ÿ",
                        options: [
                            { text: "å®Œå…¨æœªæ§åˆ¶", value: 1 },
                            { text: "æ§åˆ¶ä¸ä½³", value: 2 },
                            { text: "éƒ¨åˆ†æ§åˆ¶", value: 3 },
                            { text: "æ§åˆ¶è‰¯å¥½", value: 4 },
                            { text: "å®Œå…¨æ§åˆ¶", value: 5 }
                        ]
                    }
                ]
            },
            'ur': {
                CACT: [
                    // Child questions (1-4)
                    {
                        question: "Ø¢Ø¬ Ø¢Ù¾ Ú©Ø§ Ø¯Ù…Û Ú©ÛŒØ³Ø§ ÛÛ’ØŸ",
                        options: [
                            { text: "Ø¨ÛØª Ø¨Ø±Ø§", value: 0 },
                            { text: "Ø¨Ø±Ø§", value: 1 },
                            { text: "Ø§Ú†Ú¾Ø§", value: 2 },
                            { text: "Ø¨ÛØª Ø§Ú†Ú¾Ø§", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "Ø¬Ø¨ Ø¢Ù¾ Ø¯ÙˆÚ‘ØªÛ’ØŒ ÙˆØ±Ø²Ø´ Ú©Ø±ØªÛ’ ÛŒØ§ Ú©Ú¾ÛŒÙ„ Ú©Ú¾ÛŒÙ„ØªÛ’ ÛÛŒÚº ØªÙˆ Ø¯Ù…Û Ú©ØªÙ†ÛŒ Ù¾Ø±ÛŒØ´Ø§Ù†ÛŒ Ú©Ø§ Ø¨Ø§Ø¹Ø« ÛÛ’ØŸ",
                        options: [
                            { text: "Ø¨Ú‘ÛŒ Ù¾Ø±ÛŒØ´Ø§Ù†ÛŒ ÛÛ’ØŒ Ù…ÛŒÚº ÙˆÛ Ù†ÛÛŒÚº Ú©Ø± Ø³Ú©ØªØ§ Ø¬Ùˆ Ú©Ø±Ù†Ø§ Ú†Ø§ÛØªØ§ ÛÙˆÚº", value: 0 },
                            { text: "Ù¾Ø±ÛŒØ´Ø§Ù†ÛŒ ÛÛ’ Ø§ÙˆØ± Ù…Ø¬Ú¾Û’ ÛŒÛ Ù¾Ø³Ù†Ø¯ Ù†ÛÛŒÚº", value: 1 },
                            { text: "ØªÚ¾ÙˆÚ‘ÛŒ Ù¾Ø±ÛŒØ´Ø§Ù†ÛŒ ÛÛ’ Ù„ÛŒÚ©Ù† Ù¹Ú¾ÛŒÚ© ÛÛ’", value: 2 },
                            { text: "Ú©ÙˆØ¦ÛŒ Ù¾Ø±ÛŒØ´Ø§Ù†ÛŒ Ù†ÛÛŒÚº", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "Ú©ÛŒØ§ Ø¢Ù¾ Ú©Ùˆ Ø¯Ù…Û Ú©ÛŒ ÙˆØ¬Û Ø³Û’ Ú©Ú¾Ø§Ù†Ø³ÛŒ Ø¢ØªÛŒ ÛÛ’ØŸ",
                        options: [
                            { text: "ÛØ§ÚºØŒ ÛØ± ÙˆÙ‚Øª", value: 0 },
                            { text: "ÛØ§ÚºØŒ Ø²ÛŒØ§Ø¯Û ØªØ± ÙˆÙ‚Øª", value: 1 },
                            { text: "ÛØ§ÚºØŒ Ú©Ø¨Ú¾ÛŒ Ú©Ø¨Ú¾Ø§Ø±", value: 2 },
                            { text: "Ù†ÛÛŒÚºØŒ Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 3 }
                        ],
                        isChild: true
                    },
                    {
                        question: "Ú©ÛŒØ§ Ø¢Ù¾ Ø¯Ù…Û Ú©ÛŒ ÙˆØ¬Û Ø³Û’ Ø±Ø§Øª Ú©Ùˆ Ø¬Ø§Ú¯ Ø¬Ø§ØªÛ’ ÛÛŒÚºØŸ",
                        options: [
                            { text: "ÛØ§ÚºØŒ ÛØ± ÙˆÙ‚Øª", value: 0 },
                            { text: "ÛØ§ÚºØŒ Ø²ÛŒØ§Ø¯Û ØªØ± ÙˆÙ‚Øª", value: 1 },
                            { text: "ÛØ§ÚºØŒ Ú©Ø¨Ú¾ÛŒ Ú©Ø¨Ú¾Ø§Ø±", value: 2 },
                            { text: "Ù†ÛÛŒÚºØŒ Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 3 }
                        ],
                        isChild: true
                    },
                    // Parent questions (5-7)
                    {
                        question: "Ù¾Ú†Ú¾Ù„Û’ 4 ÛÙØªÙˆÚº Ù…ÛŒÚºØŒ Ø¢Ù¾ Ú©Û’ Ø¨Ú†Û’ Ú©Ùˆ Ú©ØªÙ†Û’ Ø¯Ù† Ø¯Ù† Ù…ÛŒÚº Ø¯Ù…Û Ú©ÛŒ Ø¹Ù„Ø§Ù…Ø§Øª ØªÚ¾ÛŒÚºØŸ",
                        options: [
                            { text: "ÛØ± Ø±ÙˆØ²", value: 0 },
                            { text: "19-24 Ø¯Ù†", value: 1 },
                            { text: "11-18 Ø¯Ù†", value: 2 },
                            { text: "4-10 Ø¯Ù†", value: 3 },
                            { text: "1-3 Ø¯Ù†", value: 4 },
                            { text: "Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 5 }
                        ],
                        isChild: false
                    },
                    {
                        question: "Ù¾Ú†Ú¾Ù„Û’ 4 ÛÙØªÙˆÚº Ù…ÛŒÚºØŒ Ø¢Ù¾ Ú©Û’ Ø¨Ú†Û’ Ú©Ùˆ Ø¯Ù…Û Ú©ÛŒ ÙˆØ¬Û Ø³Û’ Ø¯Ù† Ù…ÛŒÚº Ú©ØªÙ†Û’ Ø¯Ù† Ø³Ø§Ù†Ø³ Ù…ÛŒÚº Ø®Ø±Ø®Ø±Ø§ÛÙ¹ ØªÚ¾ÛŒØŸ",
                        options: [
                            { text: "ÛØ± Ø±ÙˆØ²", value: 0 },
                            { text: "19-24 Ø¯Ù†", value: 1 },
                            { text: "11-18 Ø¯Ù†", value: 2 },
                            { text: "4-10 Ø¯Ù†", value: 3 },
                            { text: "1-3 Ø¯Ù†", value: 4 },
                            { text: "Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 5 }
                        ],
                        isChild: false
                    },
                    {
                        question: "Ù¾Ú†Ú¾Ù„Û’ 4 ÛÙØªÙˆÚº Ù…ÛŒÚºØŒ Ø¢Ù¾ Ú©Ø§ Ø¨Ú†Û Ø¯Ù…Û Ú©ÛŒ ÙˆØ¬Û Ø³Û’ Ø±Ø§Øª Ù…ÛŒÚº Ú©ØªÙ†Û’ Ø¯Ù† Ø¬Ø§Ú¯Ø§ØŸ",
                        options: [
                            { text: "ÛØ± Ø±ÙˆØ²", value: 0 },
                            { text: "19-24 Ø¯Ù†", value: 1 },
                            { text: "11-18 Ø¯Ù†", value: 2 },
                            { text: "4-10 Ø¯Ù†", value: 3 },
                            { text: "1-3 Ø¯Ù†", value: 4 },
                            { text: "Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 5 }
                        ],
                        isChild: false
                    }
                ],
                ACT: [
                    {
                        question: "Ù¾Ú†Ú¾Ù„Û’ 4 ÛÙØªÙˆÚº Ù…ÛŒÚºØŒ Ø¯Ù…Û Ù†Û’ Ø¢Ù¾ Ú©Ùˆ Ú©Ø§Ù…ØŒ Ø§Ø³Ú©ÙˆÙ„ ÛŒØ§ Ú¯Ú¾Ø± Ù…ÛŒÚº Ú©ØªÙ†Ø§ Ú©Ø§Ù… Ú©Ø±Ù†Û’ Ø³Û’ Ø±ÙˆÚ©Ø§ØŸ",
                        options: [
                            { text: "ÛØ± ÙˆÙ‚Øª", value: 1 },
                            { text: "Ø²ÛŒØ§Ø¯Û ØªØ± ÙˆÙ‚Øª", value: 2 },
                            { text: "Ú©Ú†Ú¾ ÙˆÙ‚Øª", value: 3 },
                            { text: "ØªÚ¾ÙˆÚ‘Ø§ Ø³Ø§ ÙˆÙ‚Øª", value: 4 },
                            { text: "Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 5 }
                        ]
                    },
                    {
                        question: "Ù¾Ú†Ú¾Ù„Û’ 4 ÛÙØªÙˆÚº Ù…ÛŒÚºØŒ Ø¢Ù¾ Ú©Ùˆ Ú©ØªÙ†ÛŒ Ø¨Ø§Ø± Ø³Ø§Ù†Ø³ Ú©ÛŒ ØªÚ©Ù„ÛŒÙ ÛÙˆØ¦ÛŒØŸ",
                        options: [
                            { text: "Ø¯Ù† Ù…ÛŒÚº Ø§ÛŒÚ© Ø³Û’ Ø²ÛŒØ§Ø¯Û Ø¨Ø§Ø±", value: 1 },
                            { text: "Ø¯Ù† Ù…ÛŒÚº Ø§ÛŒÚ© Ø¨Ø§Ø±", value: 2 },
                            { text: "ÛÙØªÛ’ Ù…ÛŒÚº 3 Ø³Û’ 6 Ø¨Ø§Ø±", value: 3 },
                            { text: "ÛÙØªÛ’ Ù…ÛŒÚº Ø§ÛŒÚ© ÛŒØ§ Ø¯Ùˆ Ø¨Ø§Ø±", value: 4 },
                            { text: "Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 5 }
                        ]
                    },
                    {
                        question: "Ù¾Ú†Ú¾Ù„Û’ 4 ÛÙØªÙˆÚº Ù…ÛŒÚºØŒ Ø¯Ù…Û Ú©ÛŒ Ø¹Ù„Ø§Ù…Ø§Øª Ù†Û’ Ø¢Ù¾ Ú©Ùˆ Ø±Ø§Øª Ù…ÛŒÚº ÛŒØ§ ØµØ¨Ø­ Ø¬Ù„Ø¯ÛŒ Ú©ØªÙ†ÛŒ Ø¨Ø§Ø± Ø¬Ú¯Ø§ÛŒØ§ØŸ",
                        options: [
                            { text: "ÛÙØªÛ’ Ù…ÛŒÚº 4 ÛŒØ§ Ø²ÛŒØ§Ø¯Û Ø±Ø§ØªÛŒÚº", value: 1 },
                            { text: "ÛÙØªÛ’ Ù…ÛŒÚº 2 ÛŒØ§ 3 Ø±Ø§ØªÛŒÚº", value: 2 },
                            { text: "ÛÙØªÛ’ Ù…ÛŒÚº Ø§ÛŒÚ© Ø±Ø§Øª", value: 3 },
                            { text: "Ø§ÛŒÚ© ÛŒØ§ Ø¯Ùˆ Ø¨Ø§Ø±", value: 4 },
                            { text: "Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 5 }
                        ]
                    },
                    {
                        question: "Ù¾Ú†Ú¾Ù„Û’ 4 ÛÙØªÙˆÚº Ù…ÛŒÚºØŒ Ø¢Ù¾ Ù†Û’ Ø§Ù¾Ù†Ø§ Ø±ÛŒØ³Ú©ÛŒÙˆ Ø§Ù†ÛÛŒÙ„Ø± ÛŒØ§ Ù†ÛŒØ¨ÙˆÙ„Ø§Ø¦Ø²Ø± Ø¯ÙˆØ§ Ú©ØªÙ†ÛŒ Ø¨Ø§Ø± Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©ÛŒØŸ",
                        options: [
                            { text: "Ø¯Ù† Ù…ÛŒÚº 3 ÛŒØ§ Ø²ÛŒØ§Ø¯Û Ø¨Ø§Ø±", value: 1 },
                            { text: "Ø¯Ù† Ù…ÛŒÚº 1 ÛŒØ§ 2 Ø¨Ø§Ø±", value: 2 },
                            { text: "ÛÙØªÛ’ Ù…ÛŒÚº 2 ÛŒØ§ 3 Ø¨Ø§Ø±", value: 3 },
                            { text: "ÛÙØªÛ’ Ù…ÛŒÚº Ø§ÛŒÚ© Ø¨Ø§Ø± ÛŒØ§ Ú©Ù…", value: 4 },
                            { text: "Ø¨Ø§Ù„Ú©Ù„ Ù†ÛÛŒÚº", value: 5 }
                        ]
                    },
                    {
                        question: "Ù¾Ú†Ú¾Ù„Û’ 4 ÛÙØªÙˆÚº Ù…ÛŒÚº Ø¢Ù¾ Ø§Ù¾Ù†Û’ Ø¯Ù…Û Ú©Ù†Ù¹Ø±ÙˆÙ„ Ú©Ùˆ Ú©ÛŒØ³Û’ Ø¯Ø±Ø¬Û Ø¨Ù†Ø¯ÛŒ Ú©Ø±ÛŒÚº Ú¯Û’ØŸ",
                        options: [
                            { text: "Ø¨Ø§Ù„Ú©Ù„ Ú©Ù†Ù¹Ø±ÙˆÙ„ Ù…ÛŒÚº Ù†ÛÛŒÚº", value: 1 },
                            { text: "Ø®Ø±Ø§Ø¨ Ú©Ù†Ù¹Ø±ÙˆÙ„", value: 2 },
                            { text: "Ú©Ú†Ú¾ Ø­Ø¯ ØªÚ© Ú©Ù†Ù¹Ø±ÙˆÙ„", value: 3 },
                            { text: "Ø§Ú†Ú¾ÛŒ Ø·Ø±Ø­ Ú©Ù†Ù¹Ø±ÙˆÙ„", value: 4 },
                            { text: "Ù…Ú©Ù…Ù„ Ø·ÙˆØ± Ù¾Ø± Ú©Ù†Ù¹Ø±ÙˆÙ„", value: 5 }
                        ]
                    }
                ]
            }
        };

        // Set default language to Traditional Chinese
        let currentLanguage = 'zh-TW';
        let currentTest = null;
        let answers = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateLanguage();
        });

        function setupEventListeners() {
            // Main selectors
            document.getElementById('leftSelector').addEventListener('click', () => startTest('CACT'));
            document.getElementById('rightSelector').addEventListener('click', () => startTest('ACT'));
            document.getElementById('backButton').addEventListener('click', goBack);
            document.getElementById('restartButton').addEventListener('click', restart);
            
            // Language button
            document.getElementById('languageBtn').addEventListener('click', function(e) {
                e.stopPropagation();
                const dropdown = document.getElementById('languageDropdown');
                dropdown.classList.toggle('show');
            });
            
            // Language options
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const lang = this.getAttribute('data-lang');
                    changeLanguage(lang);
                });
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('languageDropdown');
                const button = document.getElementById('languageBtn');
                if (!dropdown.contains(event.target) && !button.contains(event.target)) {
                    dropdown.classList.remove('show');
                }
            });
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            const dropdown = document.getElementById('languageDropdown');
            dropdown.classList.remove('show');
            
            // Update language button
            const langMap = {
                'en': { flag: 'ğŸ‡¬ğŸ‡§', text: 'English' },
                'zh-CN': { flag: 'ğŸ‡¨ğŸ‡³', text: 'ç®€ä½“ä¸­æ–‡' },
                'zh-TW': { flag: 'ğŸ‡¹ğŸ‡¼', text: 'ç¹é«”ä¸­æ–‡' },
                'ur': { flag: 'ğŸ‡µğŸ‡°', text: 'Ø§Ø±Ø¯Ùˆ' }
            };
            
            document.getElementById('currentLangFlag').textContent = langMap[lang].flag;
            document.getElementById('currentLangText').textContent = langMap[lang].text;
            
            // Update RTL for Urdu
            if (lang === 'ur') {
                document.body.classList.add('rtl');
            } else {
                document.body.classList.remove('rtl');
            }
            
            updateLanguage();
            
            // If questionnaire is active, re-render it
            if (currentTest) {
                const questions = questionnaireTranslations[currentLanguage][currentTest];
                renderQuestions(questions);
            }
        }

        function updateLanguage() {
            const t = translations[currentLanguage];
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (t[key]) {
                    element.textContent = t[key];
                }
            });
            
            // Update questionnaire title if active
            if (currentTest) {
                const titleKey = currentTest === 'CACT' ? 'cactTitle' : 'actTitle';
                document.getElementById('questionnaireTitle').textContent = t[titleKey];
            }
        }

        function startTest(testType) {
            currentTest = testType;
            answers = {};
            
            document.querySelector('.container').style.display = 'none';
            document.getElementById('questionnaireContainer').classList.add('active');
            
            const t = translations[currentLanguage];
            const titleKey = testType === 'CACT' ? 'cactTitle' : 'actTitle';
            document.getElementById('questionnaireTitle').textContent = t[titleKey];
            
            const questions = questionnaireTranslations[currentLanguage][testType];
            renderQuestions(questions);
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderQuestions(questions) {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';
            
            let lastIsChild = null;
            let questionNumber = 0;
            
            questions.forEach((q, index) => {
                // Add section divider for C-ACT
                if (currentTest === 'CACT' && q.isChild !== lastIsChild) {
                    const divider = document.createElement('div');
                    divider.className = 'section-divider';
                    divider.innerHTML = `
                        <span class="section-icon">${q.isChild ? 'ğŸ‘¦' : 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§'}</span>
                        <span>${translations[currentLanguage][q.isChild ? 'childSection' : 'parentSection']}</span>
                    `;
                    container.appendChild(divider);
                    lastIsChild = q.isChild;
                    questionNumber = 0;
                }
                
                questionNumber++;
                
                const questionCard = document.createElement('div');
                questionCard.className = `question-card ${currentTest === 'CACT' ? (q.isChild ? 'child-question' : 'parent-question') : ''}`;
                
                const questionHeader = document.createElement('div');
                const numberClass = currentTest === 'CACT' ? (q.isChild ? 'child' : 'parent') : '';
                const displayNumber = currentTest === 'CACT' ? (q.isChild ? `C${questionNumber}` : `P${questionNumber}`) : index + 1;
                
                questionHeader.innerHTML = `
                    <span class="question-number ${numberClass}">${displayNumber}</span>
                    <span class="question-text">${q.question}</span>
                `;
                
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'options-container';
                
                q.options.forEach(option => {
                    const optionButton = document.createElement('div');
                    optionButton.className = 'option-button';
                    
                    // Select icon based on value
                    let icon;
                    if (currentTest === 'CACT' && q.isChild) {
                        // Child CACT questions
                        icon = option.value === 0 ? ICONS.verySad :
                               option.value === 1 ? ICONS.sad :
                               option.value === 2 ? ICONS.happy : ICONS.veryHappy;
                    } else if (currentTest === 'CACT') {
                        // Parent CACT questions
                        icon = option.value <= 1 ? ICONS.verySad :
                               option.value === 2 ? ICONS.sad :
                               option.value === 3 ? ICONS.neutral :
                               option.value === 4 ? ICONS.happy : ICONS.veryHappy;
                    } else {
                        // ACT questions
                        icon = option.value === 1 ? ICONS.verySad :
                               option.value === 2 ? ICONS.sad :
                               option.value === 3 ? ICONS.neutral :
                               option.value === 4 ? ICONS.happy : ICONS.veryHappy;
                    }
                    
                    optionButton.innerHTML = `
                        <img src="${icon}" class="option-icon" alt="${option.text}">
                        <div class="option-text">${option.text}</div>
                        <div class="option-value">${translations[currentLanguage].score}: ${option.value}</div>
                    `;
                    
                    // Check if this option was previously selected
                    if (answers[index] === option.value) {
                        optionButton.classList.add('selected');
                    }
                    
                    optionButton.addEventListener('click', () => {
                        selectOption(index, option.value, optionButton);
                    });
                    
                    optionsContainer.appendChild(optionButton);
                });
                
                questionCard.appendChild(questionHeader);
                questionCard.appendChild(optionsContainer);
                container.appendChild(questionCard);
            });
        }

        function selectOption(questionIndex, value, buttonElement) {
            // Remove previous selection for this question
            const questionCard = buttonElement.closest('.question-card');
            questionCard.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked button
            buttonElement.classList.add('selected');
            
            // Store answer
            answers[questionIndex] = value;
            
            // Check if all questions answered
            const totalQuestions = questionnaireTranslations[currentLanguage][currentTest].length;
            if (Object.keys(answers).length === totalQuestions) {
                calculateScore();
            }
        }

        function calculateScore() {
            const totalScore = Object.values(answers).reduce((sum, val) => sum + val, 0);
            
            const scoreContainer = document.getElementById('scoreContainer');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const scoreComment = document.getElementById('scoreComment');
            
            scoreDisplay.textContent = totalScore;
            
            // Determine score category and comment
            let scoreClass, commentKey;
            const t = translations[currentLanguage];
            
            if (currentTest === 'CACT') {
                if (totalScore >= 20) {
                    scoreClass = 'good';
                    commentKey = 'childWellControlled';
                } else if (totalScore >= 13) {
                    scoreClass = 'fair';
                    commentKey = 'childPartlyControlled';
                } else {
                    scoreClass = 'poor';
                    commentKey = 'childNotControlled';
                }
            } else {
                if (totalScore >= 20) {
                    scoreClass = 'good';
                    commentKey = 'wellControlled';
                } else if (totalScore >= 15) {
                    scoreClass = 'fair';
                    commentKey = 'partlyControlled';
                } else {
                    scoreClass = 'poor';
                    commentKey = 'notControlled';
                }
            }
            
            scoreDisplay.className = `score-display ${scoreClass}`;
            scoreComment.textContent = t[commentKey];
            
            scoreContainer.classList.add('show');
            scoreContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function goBack() {
            document.getElementById('questionnaireContainer').classList.remove('active');
            document.querySelector('.container').style.display = 'flex';
            document.getElementById('scoreContainer').classList.remove('show');
            currentTest = null;
        }

        function restart() {
            goBack();
        }

        // Make app fullscreen on iPad
        if (navigator.standalone) {
            document.documentElement.requestFullscreen?.() || 
            document.documentElement.webkitRequestFullscreen?.();
        }
    </script>
</body>
</html>
